import{_ as a,c as i,o as s,a7 as t}from"./chunks/framework.odPblmUY.js";const m=JSON.parse('{"title":"Adding a New Diagram/Chart ðŸ“Š","description":"","frontmatter":{"editLink":"https://github.com/mermaid-js/mermaid/edit/develop/packages/mermaid/src/docs/community/new-diagram.md","head":[["link",{"rel":"canonical","href":"https://mermaid.ai/open-source/community/new-diagram.html"}]]},"headers":[],"relativePath":"community/new-diagram.md","filePath":"community/new-diagram.md"}'),n={name:"community/new-diagram.md"};function r(o,e,l,d,h,p){return s(),i("div",null,[...e[0]||(e[0]=[t(`<h1 id="adding-a-new-diagram-chart-ðŸ“Š" tabindex="-1">Adding a New Diagram/Chart ðŸ“Š <a class="header-anchor" href="#adding-a-new-diagram-chart-ðŸ“Š" aria-label="Permalink to &quot;Adding a New Diagram/Chart ðŸ“Š&quot;">â€‹</a></h1><h3 id="examples" tabindex="-1">Examples <a class="header-anchor" href="#examples" aria-label="Permalink to &quot;Examples&quot;">â€‹</a></h3><p>Please refer to the following PRs on how to use Langium to add a new diagram grammar.</p><ul><li><a href="https://github.com/mermaid-js/mermaid/pull/4839" target="_blank" rel="noreferrer">https://github.com/mermaid-js/mermaid/pull/4839</a></li><li><a href="https://github.com/mermaid-js/mermaid/pull/4751" target="_blank" rel="noreferrer">https://github.com/mermaid-js/mermaid/pull/4751</a></li></ul><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>The below steps are a work in progress and will be updated soon.</p></div><h3 id="step-1-grammar-parsing" tabindex="-1">Step 1: Grammar &amp; Parsing <a class="header-anchor" href="#step-1-grammar-parsing" aria-label="Permalink to &quot;Step 1: Grammar &amp; Parsing&quot;">â€‹</a></h3><h3 id="step-2-rendering" tabindex="-1">Step 2: Rendering <a class="header-anchor" href="#step-2-rendering" aria-label="Permalink to &quot;Step 2: Rendering&quot;">â€‹</a></h3><p>Write a renderer that given the data found during parsing renders the diagram. To look at an example look at sequenceRenderer.js rather than the flowchart renderer as this is a more generic example.</p><p>Place the renderer in the diagram folder.</p><h3 id="step-3-detection-of-the-new-diagram-type" tabindex="-1">Step 3: Detection of the new diagram type <a class="header-anchor" href="#step-3-detection-of-the-new-diagram-type" aria-label="Permalink to &quot;Step 3: Detection of the new diagram type&quot;">â€‹</a></h3><p>The second thing to do is to add the capability to detect the new diagram to type to the detectType in <code>diagram-api/detectType.ts</code>. The detection should return a key for the new diagram type. <a href="#aria-roledescription">This key will be used to as the aria roledescription</a>, so it should be a word that clearly describes the diagram type. For example, if your new diagram uses a UML deployment diagram, a good key would be &quot;UMLDeploymentDiagram&quot; because assistive technologies such as a screen reader would voice that as &quot;U-M-L Deployment diagram.&quot; Another good key would be &quot;deploymentDiagram&quot; because that would be voiced as &quot;Deployment Diagram.&quot; A bad key would be &quot;deployment&quot; because that would not sufficiently describe the diagram.</p><p>Note that the diagram type key does not have to be the same as the diagram keyword chosen for the <a href="#grammar">grammar</a>, but it is helpful if they are the same.</p><h3 id="common-parts-of-a-diagram" tabindex="-1">Common parts of a diagram <a class="header-anchor" href="#common-parts-of-a-diagram" aria-label="Permalink to &quot;Common parts of a diagram&quot;">â€‹</a></h3><p>There are a few features that are common between the different types of diagrams. We try to standardize the diagrams that work as similar as possible for the end user. The commonalities are:</p><ul><li>Directives, a way of modifying the diagram configuration from within the diagram code.</li><li>Accessibility, a way for an author to provide additional information like titles and descriptions to people accessing a text with diagrams using a screen reader.</li><li>Themes, there is a common way to modify the styling of diagrams in Mermaid.</li><li>Comments should follow mermaid standards</li></ul><p>Here are some pointers on how to handle these different areas.</p><h2 id="accessibility" tabindex="-1">Accessibility <a class="header-anchor" href="#accessibility" aria-label="Permalink to &quot;Accessibility&quot;">â€‹</a></h2><p>Mermaid automatically adds the following accessibility information for the diagram SVG HTML element:</p><ul><li>aria-roledescription</li><li>accessible title</li><li>accessible description</li></ul><h3 id="aria-roledescription" tabindex="-1">aria-roledescription <a class="header-anchor" href="#aria-roledescription" aria-label="Permalink to &quot;aria-roledescription&quot;">â€‹</a></h3><p>The aria-roledescription is automatically set to <a href="#step-3--detection-of-the-new-diagram-type">the diagram type</a> and inserted into the SVG element.</p><p>See <a href="https://www.w3.org/TR/wai-aria-1.1/#aria-roledescription" target="_blank" rel="noreferrer">the definition of aria-roledescription</a> in <a href="https://www.w3.org/WAI/standards-guidelines/aria/" target="_blank" rel="noreferrer">the Accessible Rich Internet Applications W3 standard.</a></p><h3 id="accessible-title-and-description" tabindex="-1">accessible title and description <a class="header-anchor" href="#accessible-title-and-description" aria-label="Permalink to &quot;accessible title and description&quot;">â€‹</a></h3><p>The syntax for accessible titles and descriptions is described in <a href="./../config/accessibility.html">the Accessibility documentation section.</a></p><p>The functions for setting title and description are provided by a common module. This is the import in flowDb.js:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>import {</span></span>
<span class="line"><span>  setAccTitle,</span></span>
<span class="line"><span>  getAccTitle,</span></span>
<span class="line"><span>  getAccDescription,</span></span>
<span class="line"><span>  setAccDescription,</span></span>
<span class="line"><span>  clear as commonClear,</span></span>
<span class="line"><span>} from &#39;../../commonDb&#39;;</span></span></code></pre></div><p>The accessibility title and description are inserted into the SVG element in the <code>render</code> function in mermaidAPI.</p><h2 id="theming" tabindex="-1">Theming <a class="header-anchor" href="#theming" aria-label="Permalink to &quot;Theming&quot;">â€‹</a></h2><p>Mermaid supports themes and has an integrated theming engine. You can read more about how the themes can be used <a href="./../config/theming.html">in the docs</a>.</p><p>When adding themes to a diagram it comes down to a few important locations in the code.</p><p>The entry point for the styling engine is in <strong>src/styles.js</strong>. The getStyles function will be called by Mermaid when the styles are being applied to the diagram.</p><p>This function will in turn call a function <em>your diagram should provide</em> returning the css for the new diagram. The diagram specific, also which is commonly also called getStyles and located in the folder for your diagram under src/diagrams and should be named styles.js. The getStyles function will be called with the theme options as an argument like in the following example:</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> getStyles</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">options</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  \`</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    .line {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      stroke-width: 1;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      stroke: \${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">options</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">lineColor</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">};</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      stroke-dasharray: 2;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    }</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    // ...</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    \`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><p>Note that you need to provide your function to the main getStyles by adding it into the themes object in <strong>src/styles.js</strong> like in the xyzDiagram in the provided example:</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> themes</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  flowchart,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;flowchart-v2&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: flowchart,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  sequence,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  xyzDiagram,</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  //...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><p>The actual options and values for the colors are defined in <strong>src/theme/theme-[xyz].js</strong>. If you provide the options your diagram needs in the existing theme files then the theming will work smoothly without hiccups.</p><h2 id="examples-1" tabindex="-1">Examples <a class="header-anchor" href="#examples-1" aria-label="Permalink to &quot;Examples&quot;">â€‹</a></h2><p>The <code>@mermaid-js/examples</code> package contains a collection of examples that are used by tools like mermaid.live to help users get started with the new diagram.</p><p>You can duplicate an existing diagram example file, eg: <code>packages/examples/src/examples/flowchart.ts</code>, and modify it with details specific to your diagram.</p><p>Then you can import the example in the <code>packages/examples/src/index.ts</code> file and add it to the <code>examples</code> array.</p><p>Each diagram should have at least one example, and that should be marked as default. It is good to add more examples to showcase different features of the diagram.</p>`,41)])])}const g=a(n,[["render",r]]);export{m as __pageData,g as default};
