import{_ as r,C as n,c as s,o as e,a7 as i,b as d,w as a,a as c,G as h,a8 as l}from"./chunks/framework.odPblmUY.js";const u="/assets/assignWithDepth.Bxjt4moW.png",w=JSON.parse('{"title":"Version 8.6.0 Changes","description":"","frontmatter":{"editLink":"https://github.com/mermaid-js/mermaid/edit/develop/packages/mermaid/src/docs/config/8.6.0_docs.md","head":[["link",{"rel":"canonical","href":"https://mermaid.ai/open-source/config/8.6.0_docs.html"}]]},"headers":[],"relativePath":"config/8.6.0_docs.md","filePath":"config/8.6.0_docs.md"}'),g={name:"config/8.6.0_docs.md"};function p(f,t,m,b,y,C){const o=n("Mermaid");return e(),s("div",null,[t[1]||(t[1]=i('<h1 id="version-8-6-0-changes" tabindex="-1">Version 8.6.0 Changes <a class="header-anchor" href="#version-8-6-0-changes" aria-label="Permalink to &quot;Version 8.6.0 Changes&quot;">​</a></h1><h2 id="new-mermaid-live-editor-beta" tabindex="-1"><a href="https://mermaid-js.github.io/docs/mermaid-live-editor-beta/#/edit/eyJjb2RlIjoiJSV7aW5pdDoge1widGhlbWVcIjogXCJmb3Jlc3RcIiwgXCJsb2dMZXZlbFwiOiAxIH19JSVcbmdyYXBoIFREXG4gIEFbQ2hyaXN0bWFzXSAtLT58R2V0IG1vbmV5fCBCKEdvIHNob3BwaW5nKVxuICBCIC0tPiBDe0xldCBtZSB0aGlua31cbiAgQyAtLT58T25lfCBEW0xhcHRvcF1cbiAgQyAtLT58VHdvfCBFW2lQaG9uZV1cbiAgQyAtLT58VGhyZWV8IEZbZmE6ZmEtY2FyIENhcl1cblx0XHQiLCJtZXJtYWlkIjp7InRoZW1lIjoiZGFyayJ9fQ" target="_blank" rel="noreferrer">New Mermaid Live-Editor Beta</a> <a class="header-anchor" href="#new-mermaid-live-editor-beta" aria-label="Permalink to &quot;[New Mermaid Live-Editor Beta](https://mermaid-js.github.io/docs/mermaid-live-editor-beta/#/edit/eyJjb2RlIjoiJSV7aW5pdDoge1widGhlbWVcIjogXCJmb3Jlc3RcIiwgXCJsb2dMZXZlbFwiOiAxIH19JSVcbmdyYXBoIFREXG4gIEFbQ2hyaXN0bWFzXSAtLT58R2V0IG1vbmV5fCBCKEdvIHNob3BwaW5nKVxuICBCIC0tPiBDe0xldCBtZSB0aGlua31cbiAgQyAtLT58T25lfCBEW0xhcHRvcF1cbiAgQyAtLT58VHdvfCBFW2lQaG9uZV1cbiAgQyAtLT58VGhyZWV8IEZbZmE6ZmEtY2FyIENhcl1cblx0XHQiLCJtZXJtYWlkIjp7InRoZW1lIjoiZGFyayJ9fQ)&quot;">​</a></h2><h2 id="cdn" tabindex="-1"><a href="https://www.jsdelivr.com/package/npm/mermaid" target="_blank" rel="noreferrer">CDN</a> <a class="header-anchor" href="#cdn" aria-label="Permalink to &quot;[CDN](https://www.jsdelivr.com/package/npm/mermaid)&quot;">​</a></h2><p>With version 8.6.0 comes the release of directives for mermaid, a new system for modifying configurations, with the aim of establishing centralized, sane defaults and simple implementation.</p><p><code>directives</code> allow for a single-use overwriting of <code>config</code>, as it has been discussed in <a href="./../config/configuration.html">Configurations</a>. This allows site Diagram Authors to instantiate temporary modifications to <code>config</code> through the use of <a href="./directives.html">Directives</a>, which are parsed before rendering diagram definitions. This allows the Diagram Authors to alter the appearance of the diagrams.</p><p><strong>A likely application for this is in the creation of diagrams/charts inside company/organizational webpages, that rely on mermaid for diagram and chart rendering.</strong></p><p>the <code>init</code> directive is the main method of configuration for Site and Current Levels.</p><p>The three levels of are Configuration, Global, Site and Current.</p><table tabindex="0"><thead><tr><th>Level of Configuration</th><th>Description</th></tr></thead><tbody><tr><td>Global Configuration</td><td>Default Mermaid Configurations</td></tr><tr><td>Site Configuration</td><td>Configurations made by site owner</td></tr><tr><td>Current Configuration</td><td>Configurations made by Implementors</td></tr></tbody></table><h1 id="limits-to-modifying-configurations" tabindex="-1">Limits to Modifying Configurations <a class="header-anchor" href="#limits-to-modifying-configurations" aria-label="Permalink to &quot;Limits to Modifying Configurations&quot;">​</a></h1><p><strong>secure Array</strong></p><table tabindex="0"><thead><tr><th>Parameter</th><th>Description</th><th>Type</th><th>Required</th><th>Values</th></tr></thead><tbody><tr><td>secure</td><td>Array of parameters excluded from init directive</td><td>Array</td><td>Required</td><td>Any parameters</td></tr></tbody></table><p>The modifiable parts of the Configuration are limited by the secure array, which is an array of immutable parameters, this array can be expanded by site owners.</p><p><strong>Notes</strong>: secure arrays work like nesting dolls, with the Global Configurations’ secure array holding the default and immutable list of immutable parameters, or the smallest doll, to which site owners may add to, but implementors may not modify it.</p><h1 id="secure-arrays" tabindex="-1">Secure Arrays <a class="header-anchor" href="#secure-arrays" aria-label="Permalink to &quot;Secure Arrays&quot;">​</a></h1><p>Site owners can add to the <strong>secure</strong> array using this command: mermaidAPI.initialize( { startOnLoad: true, secure: [&#39;parameter1&#39;, &#39;parameter2&#39;] } );</p><p>Default values for the <code>secure array</code> consists of: [&#39;secure&#39;, &#39;securityLevel&#39;, &#39;startOnLoad&#39;, &#39;maxTextSize&#39;]. These default values are immutable.</p><p>Implementors can only modify configurations using directives, and cannot change the <code>secure</code> array.</p><h1 id="modifying-configurations-and-directives" tabindex="-1">Modifying Configurations and directives: <a class="header-anchor" href="#modifying-configurations-and-directives" aria-label="Permalink to &quot;Modifying Configurations and directives:&quot;">​</a></h1><p>The Two types of directives: are <code>init</code> (or <code>initialize</code>) and <code>wrap</code>.</p><div class="info custom-block"><p class="custom-block-title">INFO</p><p>All directives are enclosed in <code>%%{ }%%</code></p></div><p>Older versions of mermaid will not parse directives because <code>%%</code> will comment out the directive. This makes the update backwards-compatible.</p><h1 id="init" tabindex="-1">Init <a class="header-anchor" href="#init" aria-label="Permalink to &quot;Init&quot;">​</a></h1><p><code>init</code>, or <code>initialize</code>: this directive gives the user the ability to overwrite and change the values for any configuration parameters not set in the secure array.</p><table tabindex="0"><thead><tr><th>Parameter</th><th>Description</th><th>Type</th><th>Required</th><th>Values</th></tr></thead><tbody><tr><td>init</td><td>modifies configurations</td><td>Directive</td><td>Optional</td><td>Any parameters not included in the secure array</td></tr></tbody></table><div class="info custom-block"><p class="custom-block-title">INFO</p><p>init would be an argument-directive: <code>%%{init: { **insert argument here**}}%%</code></p><p>The json object that is passed as {<strong>argument</strong> } must be valid, quoted json or it will be ignored. <strong>for example</strong>:</p><p><code>%%{init: {&quot;theme&quot;: &quot;default&quot;, &quot;logLevel&quot;: 1 }}%%</code></p><p>Configurations that are passed through init cannot change the parameters in a secure array at a higher level. In the event of a collision, mermaid will give priority to secure arrays and parse the request without changing the values of those parameters in conflict.</p><p>When deployed within code, init is called before the graph/diagram description.</p></div><p><strong>for example</strong>:</p>',27)),(e(),d(l,null,{default:a(()=>[h(o,{id:"mermaid-206",showCode:!0,graph:"%25%25%7Binit%3A%20%7B%22theme%22%3A%20%22default%22%2C%20%22logLevel%22%3A%201%20%7D%7D%25%25%0A%20graph%20LR%0A%20%20a--%3Eb%0A%20%20b--%3Ec%0A%20%20c--%3Ed%0A%20%20d--%3Ee%0A%20%20e--%3Ef%0A%20%20f--%3Eg%0A%20%20g--%3E%0A"})]),fallback:a(()=>[...t[0]||(t[0]=[c(" Loading... ",-1)])]),_:1})),t[2]||(t[2]=i('<h1 id="wrap" tabindex="-1">Wrap <a class="header-anchor" href="#wrap" aria-label="Permalink to &quot;Wrap&quot;">​</a></h1><table tabindex="0"><thead><tr><th>Parameter</th><th>Description</th><th>Type</th><th>Required</th><th>Values</th></tr></thead><tbody><tr><td>wrap</td><td>a callable text-wrap function</td><td>Directive</td><td>Optional</td><td>%%{wrap}%%</td></tr></tbody></table><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Wrap is a function that is currently only deployable for sequence diagrams.</p><p><code>Wrap respects a manually added &lt;br&gt;, so if the user wants to break up their text, they have full control over line breaks by adding &lt;br&gt; tags.</code></p><p>It is a non-argument directive and can be executed thusly:</p><p><code>%%{wrap}%%</code> .</p></div><p><strong>An example of text wrapping in a sequence diagram</strong>:</p><p>![Image showing wrapped text](img/wrapped text.png)</p><h1 id="resetting-configurations" tabindex="-1">Resetting Configurations: <a class="header-anchor" href="#resetting-configurations" aria-label="Permalink to &quot;Resetting Configurations:&quot;">​</a></h1><p>There are two more functions in the mermaidAPI that can be called by site owners: <strong>reset</strong> and <strong>globalReset</strong>.</p><p><strong>reset</strong>: resets the configuration to whatever the last configuration was. This can be done to undo more recent changes set from the last mermaidAPI.initialize({...}) configuration.</p><p><strong>globalReset</strong> will reset both the current configuration AND the site configuration back to the global defaults.</p><p><strong>Notes</strong>: Both <code>reset</code> and <code>globalReset</code> are only available to site owners, and as such implementors have to edit their configs using <code>init</code>.</p><h1 id="additional-utils-to-mermaid" tabindex="-1">Additional Utils to mermaid <a class="header-anchor" href="#additional-utils-to-mermaid" aria-label="Permalink to &quot;Additional Utils to mermaid&quot;">​</a></h1><p>• <strong>memoize</strong>: simple caching for computationally expensive functions, reducing rendering time by about 90%.</p><p>• <strong>assignWithDepth</strong> - an improvement on previous functions with config.js and <code>Object.assign</code>. The purpose of this function is to provide a sane mechanism for merging objects, similar to <code>object.assign</code>, but with depth.</p><p>Example of <strong>assignWithDepth</strong>:</p><p><img src="'+u+'" alt="Image showing assignWithDepth"></p><p>Example of <strong>object.Assign</strong>:</p><p>![Image showing object.assign without depth](img/object.assign without depth.png)</p><p>• <strong>calculateTextDimensions</strong>, <strong>calculateTextWidth</strong>， and <strong>calculateTextHeight</strong> - for measuring text dimensions, width and height.</p><p><strong>Notes</strong>: For more information on usage, parameters, and return info for these new functions take a look at the jsdocs for them in the utils package.</p><h1 id="new-api-requests-introduced-in-version-8-6-0" tabindex="-1">New API Requests Introduced in Version 8.6.0 <a class="header-anchor" href="#new-api-requests-introduced-in-version-8-6-0" aria-label="Permalink to &quot;New API Requests Introduced in Version 8.6.0&quot;">​</a></h1><h2 id="setsiteconfig" tabindex="-1">setSiteConfig <a class="header-anchor" href="#setsiteconfig" aria-label="Permalink to &quot;setSiteConfig&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Function</th><th>Description</th><th>Type</th><th>Values</th><th>Parameters</th><th>Returns</th></tr></thead><tbody><tr><td><code>setSiteConfig</code></td><td>Sets the siteConfig to desired values</td><td>Put Request</td><td>Any Values, except ones in secure array</td><td>conf</td><td>siteConfig</td></tr></tbody></table><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Sets the siteConfig. The siteConfig is a protected configuration for repeat use. Calls to reset() will reset the currentConfig to siteConfig. Calls to reset(configApi.defaultConfig) will reset siteConfig and currentConfig to the defaultConfig Note: currentConfig is set in this function。 Default value: will mirror Global Config</p></div><h2 id="getsiteconfig" tabindex="-1">getSiteConfig <a class="header-anchor" href="#getsiteconfig" aria-label="Permalink to &quot;getSiteConfig&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Function</th><th>Description</th><th>Type</th><th>Values</th></tr></thead><tbody><tr><td><code>getSiteConfig</code></td><td>Returns the current <code>siteConfig</code> base configuration</td><td>Get Request</td><td>Returns Any Values in <code>siteConfig</code></td></tr></tbody></table><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Returns any values in siteConfig.</p></div><h2 id="setconfig" tabindex="-1">setConfig <a class="header-anchor" href="#setconfig" aria-label="Permalink to &quot;setConfig&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Function</th><th>Description</th><th>Type</th><th>Values</th><th>Parameters</th><th>Returns</th></tr></thead><tbody><tr><td><code>setConfig</code></td><td>Sets the <code>currentConfig</code> to desired values</td><td>Put Request</td><td>Any Values, those in secure array</td><td>conf</td><td><code>currentConfig</code> merged with the sanitized conf</td></tr></tbody></table><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Sets the currentConfig. The parameter conf is sanitized based on the siteConfig.secure keys. Any values found in conf with key found in siteConfig.secure will be replaced with the corresponding siteConfig value.</p></div><h2 id="getconfig" tabindex="-1">getConfig <a class="header-anchor" href="#getconfig" aria-label="Permalink to &quot;getConfig&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Function</th><th>Description</th><th>Type</th><th>Return Values</th></tr></thead><tbody><tr><td><code>getConfig</code></td><td>Obtains the <code>currentConfig</code></td><td>Get Request</td><td>Any Values from <code>currentConfig</code></td></tr></tbody></table><div class="info custom-block"><p class="custom-block-title">INFO</p><p>Returns any values in currentConfig.</p></div><h2 id="sanitize" tabindex="-1">sanitize <a class="header-anchor" href="#sanitize" aria-label="Permalink to &quot;sanitize&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Function</th><th>Description</th><th>Type</th><th>Values</th></tr></thead><tbody><tr><td><code>sanitize</code></td><td>Sets the <code>siteConfig</code> to desired values.</td><td>Put Request(?)</td><td>None</td></tr></tbody></table><div class="info custom-block"><p class="custom-block-title">INFO</p><p>modifies options in-place Ensures options parameter does not attempt to override siteConfig secure keys.</p></div><h2 id="reset" tabindex="-1">reset <a class="header-anchor" href="#reset" aria-label="Permalink to &quot;reset&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Function</th><th>Description</th><th>Type</th><th>Required</th><th>Values</th><th>Parameter</th></tr></thead><tbody><tr><td><code>reset</code></td><td>Resets <code>currentConfig</code> to conf</td><td>Put Request</td><td>Required</td><td>None</td><td>conf</td></tr></tbody></table><h2 id="conf" tabindex="-1">conf <a class="header-anchor" href="#conf" aria-label="Permalink to &quot;conf&quot;">​</a></h2><table tabindex="0"><thead><tr><th>Parameter</th><th>Description</th><th>Type</th><th>Required</th><th>Values</th></tr></thead><tbody><tr><td><code>conf</code></td><td>base set of values, which <code>currentConfig</code> could be reset to.</td><td>Dictionary</td><td>Required</td><td>Any Values, with respect to the secure Array</td></tr></tbody></table><div class="info custom-block"><p class="custom-block-title">INFO</p><p>default: current siteConfig (optional, default <code>getSiteConfig()</code>)</p></div><h2 id="for-more-information-read-setup" tabindex="-1">For more information, read <a href="./setup/README.html">Setup</a>. <a class="header-anchor" href="#for-more-information-read-setup" aria-label="Permalink to &quot;For more information, read [Setup](./setup/README.md).&quot;">​</a></h2>',41))])}const x=r(g,[["render",p]]);export{w as __pageData,x as default};
